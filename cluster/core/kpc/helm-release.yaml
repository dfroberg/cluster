---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: kubernetes-pfsense-controller
  namespace: kpc
spec:
  interval: 5m
  chart:
    spec:
      # renovate: registryUrl=https://travisghansen.github.io/kubernetes-pfsense-controller-chart/
      chart: kpc-primary
      version: v0.5.5
      sourceRef:
        kind: HelmRepository
        name: kpc-charts
        namespace: flux-system
  values:
    haproxy-declarative:
        enabled: true
    haproxy-ingress-proxy:
        enabled: true
        ingressLabelSelector:
        ingressFieldSelector:
        # works in conjunction with the ingress annotation 'haproxy-ingress-proxy.pfsense.org/enabled'
        # if defaultEnabled is empty or true, you can disable specific ingresses by setting the annotation to false
        # if defaultEnabled is false, you can enable specific ingresses by setting the annotation to true
        defaultEnabled: true
        defaultFrontend: http-80
        defaultBackend: traefik
        #allowedHostRegex: "/.*/"
